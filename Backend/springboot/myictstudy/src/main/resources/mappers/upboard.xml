<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.ictedu.myictstudy.dao.UpBoardDao">

	<insert id="add" parameterType="upvo">
	 	insert into upboard values(upboard_seq.nextVal,#{title},
	 			#{writer},#{content},#{imgn},0,#{reip},sysdate)
	</insert>

<!--	<select id="list" resultType="upvo">-->
<!--	 	select * from upboard order by 1 desc-->
<!--	</select>-->
	<select id="list" resultType="upvo" parameterType="map">
		SELECT num,TITLE,writer,content,hit,reip,bdate,imgn, row_num
		FROM (
		SELECT num,TITLE,writer,content,hit,reip,bdate,imgn,
		ROW_NUMBER() OVER(ORDER BY num desc) AS row_num FROM upboard
		) numbered_rows WHERE row_num BETWEEN #{begin} AND #{end}
	
	</select>
	<select id="totalCount" resultType="int">
			select count(*) cnt from upboard
	</select>
 	<update id="hit" parameterType="int">
 		update upboard set hit=hit+1 where num=#{num}
 	</update>
 	<select id="detail" parameterType="int" resultType="upvo">
 		select * from upboard where num=#{num}
 	</select>
 	<delete id="delete" parameterType="int">
 		delete from upboard where num=#{num}
 	</delete>














</mapper>





